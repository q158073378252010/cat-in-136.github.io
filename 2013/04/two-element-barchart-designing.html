<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>２本の（省略付き）棒グラフを思いのまま描く方法 cat_in_136.blog()</title>
  <link rel="canonical" href="http://cat-in-136.github.io/2013/04/two-element-barchart-designing.html" />
  <link rel="alternate" type="application/atom+xml" href="/feed.xml" />
  <meta property="og:title" content="２本の（省略付き）棒グラフを思いのまま描く方法" />
  <meta property="og:type" content="article" />
  <meta property="og:image" content="http://3.bp.blogspot.com/-S6asQgyCd0c/UWk8zua_TzI/AAAAAAAAAWc/Vpij-1gJDrA/s72-c/bar.png" />
  <meta property="og:site_name" content="cat_in_136.blog()" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=yes" />
  <link rel="stylesheet" href="/css/main.css" />
</head>

<body>
  <header class="site-header">
  <div class="wrap">
    <a class="site-title" href="/">cat_in_136.blog()</a>
    <nav class="site-nav">
      
      <a class="page-link" href="/archive.html">Archive</a>
      
      <a class="page-link" href="/feed.xml">Feed</a>
      
      <a class="page-link" href="/tags.html">Tags</a>
      
    </nav>
  </div>
</header>

  <div class="page-content">
    <div class="wrap">
    <div class="post">
  <header class="post-header">
    <h1><a href="/2013/04/two-element-barchart-designing.html" rel="bookmark">２本の（省略付き）棒グラフを思いのまま描く方法</a></h1>
    <p class="meta"><time>2013-04-13T20:29:00+09:00</time></p>
  </header>

  <article class="post-content">
  <p>例えば、こんなふたつの値があったとしましょう。</p>

<figure style="display: block; margin: 1em;">
<figcaption style="display: block;">
中国・日本のGDP (<a href="http://data.worldbank.org/indicator/NY.GDP.MKTP.CD" rel="nofollow">世界銀行発表の2011年のGDP</a>)
</figcaption>

<table>
<col />
<col />
<thead>
<tr>
 <th>Country name</th>
 <th>GDP (US$)</th>
</tr>
</thead>
<tbody>
<tr>
 <td>China</td>
 <td>7,318,499,269,769</td>
</tr>
<tr>
 <td>Japan</td>
 <td>5,867,154,491,918</td>
</tr>
</tbody>
</table>

</figure>

<p>そのままグラフを作ると <strong>差が少なくて見栄えが悪い</strong> の。</p>

<figure style="display: block; margin: 1em;">
<a href="http://3.bp.blogspot.com/-S6asQgyCd0c/UWk8zua_TzI/AAAAAAAAAWc/Vpij-1gJDrA/s1600/bar.png"><img src="http://3.bp.blogspot.com/-S6asQgyCd0c/UWk8zua_TzI/AAAAAAAAAWc/Vpij-1gJDrA/s320/bar.png" width="245" height="292" /></a>
<figcaption style="display: block;">中国・日本のGDP</figcaption>
</figure>

<h3>そんなときの簡単な省略棒グラフの描き方</h3>

<p>まずは、枠の中に高さの違う棒（四角形）を２つ描きます。
棒の高さは <strong>差をぐいっと付けて</strong> 描きます。
どの程度、差を付けるかは <strong>お好みで調整してね</strong> 。</p>

<figure style="display: block; margin: 1em;">
<img src="http://2.bp.blogspot.com/-znhC2KK9fjM/UWk8z9LQ-XI/AAAAAAAAAWU/ZW3THcJHIBQ/s320/step1.png" width="110" height="156"/>
</figure>

<p>大きい方に合わせて線を引いて大きい方の数字を、
小さい方に合わせて線を引いて小さい方の数字を書き入れます。
値が大きいので billion で区切って、7318 と 5867 を書き入れました。
また、棒の下にはラベルも書きましょう。
もちろん、高い棒の方が China ですね。</p>

<figure style="display: block; margin: 1em;">
<img src="http://4.bp.blogspot.com/-MAylsW6CNec/UWk80KelHaI/AAAAAAAAAW4/CgGeNOYAPfY/s320/step2.png" width="110" height="156"/>
</figure>

<p>最後に左下に省略線と数字のゼロを入れるだけ。</p>

<figure style="display: block; margin: 1em;">
<img src="http://3.bp.blogspot.com/-EaqdgmvrxOY/UWk80YfJNUI/AAAAAAAAAWo/p4-xjLVpvpE/s320/step3.png" width="142" height="169"/>
</figure>

<p>見栄えが気に入らないのなら、お好みで色なり線を工夫してみてね☆彡</p>

<figure style="display: block; margin: 1em;">
<img src="http://4.bp.blogspot.com/-D1ilLAFpPjM/UWk80ZAbI2I/AAAAAAAAAWw/H2g_WB1hYn0/s320/step4.png" width="153" height="187"/>
</figure>

<h4>このやり方で省略棒グラフとして正しいことの数学的議論</h4>

<p>2つのデータがあって、それぞれの値が
<var>V<sub>1</sub></var>,
<var>V<sub>2</sub></var>
とする。
それぞれに対応する棒グラフの高さが
<var>h<sub>1</sub></var>,
<var>h<sub>2</sub></var>
とし（単位はセンチメートルなどの長さ）、
省略グラフの波線によって
<var>E</var>
だけ省略されているとする。</p>

<figure style="display: block; margin: 1em;">
<img src="http://4.bp.blogspot.com/-PpVwxZY66F8/UWk8zgAds3I/AAAAAAAAAW8/tn44kWgvsg8/s320/anly.png" widht="189" height="167" />
</figure>

<p>このとき、</p>

<div style="text-align: center; margin: auto;">
<var>V<sub>1</sub></var>&#x205f;&#xf7;&#x205f;<var>V<sub>2</sub></var>
&lt;
<var>h<sub>1</sub></var>&#x205f;&#xf7;&#x205f;<var>h<sub>2</sub></var>
</div>

<p>が成り立つ任意の
<var>V<sub>1</sub></var>,
<var>V<sub>2</sub></var>,
<var>h<sub>1</sub></var>,
<var>h<sub>2</sub></var>
(<var>V<sub>1</sub></var>&#x205f;&gt;&#x205f;<var>V<sub>2</sub></var>&#x205f;&gt;&#x205f;0,
<var>h<sub>1</sub></var>&#x205f;&gt;&#x205f;<var>h<sub>2</sub></var>&#x205f;&gt;&#x205f;0)
に対して<var>E</var>(&gt;&#x205f;0)が存在することを以下に示す。</p>

<p>もし省略部のない単なる棒グラフの場合、
<var>V<sub>1</sub></var>,
<var>h<sub>1</sub></var>と
<var>V<sub>2</sub></var>,
<var>h<sub>2</sub></var>
の比は同じになるように、棒グラフを描く必要がある。
よって、省略部のない単なる棒グラフの場合下式が成り立つ。</p>

<div style="text-align: center; margin: auto;">
<var>V<sub>1</sub></var>&#x205f;&#xf7;&#x205f;<var>h<sub>1</sub></var>
=
<var>V<sub>2</sub></var>&#x205f;&#xf7;&#x205f;<var>h<sub>2</sub></var>
</div>

<p>省略部のある棒グラフでは
<var>h<sub>1</sub></var>,
<var>h<sub>2</sub></var>
がそれぞれ<var>E</var>だけ省略されているので、
上の式を
<var>h<sub>1</sub></var>&#x205f;&#x2192;&#x205f;(<var>h<sub>1</sub></var> + <var>E</var>),
<var>h<sub>2</sub></var>&#x205f;&#x2192;&#x205f;(<var>h<sub>2</sub></var> + <var>E</var>)
を書き換えた、下式が成り立たなければならない。</p>

<div style="text-align: center; margin: auto;">
<var>V<sub>1</sub></var>&#x205f;&#xf7;&#x205f;(<var>h<sub>1</sub> + E)</var>
=
<var>V<sub>2</sub></var>&#x205f;&#xf7;&#x205f;(<var>h<sub>2</sub> + E)</var>
</div>

<p>これを解くと <var>E</var> は下記の値となる。</p>

<div style="text-align: center; margin: auto;">
<var>E</var>
=
(<var>V<sub>2</sub></var>&#x2062;<var>h<sub>1</sub></var>&#x205f;-&#x205f;<var>V<sub>1</sub></var>&#x2062;<var>h<sub>2</sub></var>)&#x205f;&#xf7;&#x205f;(<var>V<sub>1</sub></var>&#x205f;-&#x205f;<var>V<sub>2</sub></var>)
</div>

<p>ここで</p>

<div style="text-align: center; margin: auto;">
<var>V<sub>1</sub></var>&#x205f;&#xf7;&#x205f;<var>V<sub>2</sub></var>
&lt;
<var>h<sub>1</sub></var>&#x205f;&#xf7;&#x205f;<var>h<sub>2</sub></var>
</div>

<p>から</p>

<div style="text-align: center; margin: auto;">
<var>V<sub>2</sub></var>&#x2062;<var>h<sub>1</sub></var>&#x205f;-&#x205f;<var>V<sub>1</sub></var>&#x2062;<var>h<sub>2</sub></var>
&gt;
0
</div>

<p>が求まるので、今求めた<var>E</var>の値は正の数である。</p>

<p><abbr title="Quod erat demonstrandum">QED</abbr>.</p>

<h4>上の証明の考察</h4>

<p>上の証明で最初に与えた条件式</p>

<div style="text-align: center; margin: auto;">
<var>V<sub>1</sub></var>&#x205f;&#xf7;&#x205f;<var>V<sub>2</sub></var>
&lt;
<var>h<sub>1</sub></var>&#x205f;&#xf7;&#x205f;<var>h<sub>2</sub></var>
</div>

<p>は、実際の値の比(<var>V<sub>1</sub></var>&#x205f;&#xf7;&#x205f;<var>V<sub>2</sub></var>)
よりもグラフの上の棒の高さの比
(<var>h<sub>1</sub></var>&#x205f;&#xf7;&#x205f;<var>h<sub>2</sub></var>)
が大きいということを表す。</p>

<p>この前提下では、任意のデータ、任意の棒の高さで省略付き棒グラフが描ける。
というのも、任意のデータ、任意の棒の高さに対して、省略線で省略された棒の高さ(<var>E</var>)が求められるからである。</p>

<p style="background-color: rgba(255,192,192,0.5); font-size: larger;">結論1: このやり方は<ins datetime="2013-04-20">実際の値の比よりもグラフの上の棒の高さの比が大きいという前提下で</ins>任意のデータ、任意の棒の高さで省略付き棒グラフが描ける</p>

<p>逆に</p>

<div style="text-align: center; margin: auto;">
<var>V<sub>1</sub></var>&#x205f;&#xf7;&#x205f;<var>V<sub>2</sub></var>
&gt;
<var>h<sub>1</sub></var>&#x205f;&#xf7;&#x205f;<var>h<sub>2</sub></var>
</div>

<p>すなわち、実際の値の比(<var>V<sub>1</sub></var>&#x205f;&#xf7;&#x205f;<var>V<sub>2</sub></var>)
よりもグラフの上の棒の高さの比
(<var>h<sub>1</sub></var>&#x205f;&#xf7;&#x205f;<var>h<sub>2</sub></var>)
が小さい場合、省略線で省略された棒の高さ(<var>E</var>)が負になってしまう。
これは具体的には下記のようなことであり、省略によって棒の高さを減じなければならないのに、
棒の高さが水増し、という意味不明なことになっている。
これは明らかにおかしい。</p>

<figure style="display: block; margin: 1em;">
<figcaption style="display: block;">
中国・パラオのGDP (<a href="http://data.worldbank.org/indicator/NY.GDP.MKTP.CD" rel="nofollow">世界銀行発表の2011年のGDP</a>)
</figcaption>

<table>
<col />
<col />
<thead>
<tr>
 <th>Country name</th>
 <th>GDP (US$)</th>
</tr>
</thead>
<tbody>
<tr>
 <td>China</td>
 <td>7,318,499,269,769</td>
</tr>
<tr>
 <td>Palau</td>
 <td>165,517,314</td>
</tr>
</tbody>
</table>

</figure>


<figure style="display: block; margin: 1em;">
<img src="http://2.bp.blogspot.com/-0hfEHef_NZ0/UWk80jgEuOI/AAAAAAAAAW0/GARtTUTzR4c/s320/wrongscale.png" width="198" height="187"/>
<figcaption style="display: block;">中国・パラオのGDP（不正な省略棒グラフ表現）</figcaption>
</figure>

<p style="background-color: rgba(255,192,192,0.5); font-size: larger;">結論2: 省略棒グラフは、元のデータの変化の比を強調して表示できる。しかし、元のデータの変化の比を縮めて表示することはできない。</p>

<h4>まとめ</h4>

<p>以上の考察によって、<strong style="color: #f00;">2本の</strong> 省略棒グラフは、以下の特徴を持つことがわかった。</p>

<ul>
<li><ins datetime="2013-04-20">実際の値の比よりもグラフの上の棒の高さの比が大きいという前提下で</ins>任意のデータに対して、任意の棒の高さで描くことができる。すなわち、<strong style="color: #f00;">棒の高さや高さの差にまったく意味はない</strong>。</li>
<li>2つの値の <strong style="color: #f00;"><del datetime="2013-04-20">差</del><ins datetime="2013-04-20">比</ins>がたいしたことがない</strong> ことがわかる。</li>
</ul>

<h4>補足</h4>

<ul>
<li>本稿では、3本以上の省略棒グラフについては言及はしていないし、善悪も言及していない。
<ul>
<li>3本以上の省略棒グラフでは、差の束縛条件が加わるため、「棒の高さの差にまったく意味がない」ということはなくなる。</li>
<li>「棒の高さの差」には意味が生じるので、批評の観点としては、人間が見た「印象」を考慮に入れた議論となる。</li>
<li>よって、3本以上の省略棒グラフの善悪の議論には、純粋な数式では答えは導き出せないのである。</li>
</ul></li>
<li>本稿は GDP を単なる手頃なデータとして使っただけであり、例えば中国の GDP について強調しようとしたわけではない。</li>
</ul>

<h4>参考文献</h4>

<ul>
<li><a href="http://data.worldbank.org/indicator/NY.GDP.MKTP.CD" rel="nofollow">GDP (current US$)</a>, The World Bank, 2011.</li>
<li><a href="http://linux.slashdot.jp/comments.pl?sid=419181&amp;cid=1421914">Re: 悪いグラフの例|3D円グラフにご注意</a>, commented by x-rebuttal, スラッシュ・ドット・ジャパン, 2008.</li>
</ul>

  </article>

  <footer class="post-footer">
    <div class="meta">
      Tag:
      
      <a class="tag" href="/tags.html#tag_%E3%83%81%E3%83%A9%E3%82%B7%E3%81%AE%E8%A3%8F">チラシの裏</a>
      
      <a class="tag" href="/tags.html#tag_math">Math</a>
      
      
    </div>
    <div class="meta share">
      
      Share:
      <a rel="noindex nofollow" href="https://twitter.com/intent/tweet?url=http://cat-in-136.github.io/2013/04/two-element-barchart-designing.html&amp;text=%EF%BC%92%E6%9C%AC%E3%81%AE%EF%BC%88%E7%9C%81%E7%95%A5%E4%BB%98%E3%81%8D%EF%BC%89%E6%A3%92%E3%82%B0%E3%83%A9%E3%83%95%E3%82%92%E6%80%9D%E3%81%84%E3%81%AE%E3%81%BE%E3%81%BE%E6%8F%8F%E3%81%8F%E6%96%B9%E6%B3%95+cat_in_136.blog()&amp;via=cat_in_136">Twitter</a>
      <a rel="noindex nofollow" href="https://www.facebook.com/sharer/sharer.php?u=http://cat-in-136.github.io/2013/04/two-element-barchart-designing.html">Facebook</a>
      <a rel="noindex nofollow" href="http://b.hatena.ne.jp/entry/cat-in-136.github.io/2013/04/two-element-barchart-designing.html">Hatena Bookmark</a>
      <a rel="noindex nofollow" href="http://www.addtoany.com/share_save?linkurl=http://cat-in-136.github.io/2013/04/two-element-barchart-designing.html&amp;linkname=%EF%BC%92%E6%9C%AC%E3%81%AE%EF%BC%88%E7%9C%81%E7%95%A5%E4%BB%98%E3%81%8D%EF%BC%89%E6%A3%92%E3%82%B0%E3%83%A9%E3%83%95%E3%82%92%E6%80%9D%E3%81%84%E3%81%AE%E3%81%BE%E3%81%BE%E6%8F%8F%E3%81%8F%E6%96%B9%E6%B3%95+cat_in_136.blog()">More via AddToAny...</a>
    </div>
    <div class="meta">
      Author: cat_in_136
      Date: <time>2013-04-13T20:29:00+09:00</time>
      (Modified: <time>2013-04-20T19:35:03+09:00</time>)
    </div>
    
    <div class="meta">
      Source: <a href="https://github.com/cat-in-136/blog/blob/master/_posts/2013-04-13-two-element-barchart-designing.html">_posts/2013-04-13-two-element-barchart-designing.html</a>
      (<a href="https://github.com/cat-in-136/blog/commits/master/_posts/2013-04-13-two-element-barchart-designing.html">History</a>)
    </div>
    
  </footer>

  <style type="text/css"><!-- /* --><![CDATA[ /* */
@import "https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css";
pre.prettyprint { overflow: auto; }
  /* ]]><!-- */ --></style>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js" defer="defer"></script>
  <script type="text/javascript" src="data:text/javascript;base64,d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLCBmdW5jdGlvbiAoZSkgeyBwcmV0dHlQcmludCgpOyB9LCBmYWxzZSk7Cg==" defer="defer"></script>

</div>

<nav class="post-nav wrap">
  <div class="previous-post">
    
    <a href="/2013/03/svg.html" title="SVGフィルターで雲を描くことに関して" rel="prev">&#x2190;SVGフィルターで雲を描くことに関して</a>
    
  </div>
  <div class="next-post">
    
    <a href="/2013/04/diff-between-firefox-21-beta-5-default.html" title="Diff between firefox 21 beta 5 default preference and firefox 20.0.1 " rel="next">Diff between firefox 21 beta 5 default preference and firefox 20.0.1 &#x2192;</a>
    
  </div>
</nav>

<div id="disqus_thread"></div>
<script type="text/javascript">
var disqus_shortname = 'catin136blog';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  document.getElementsByTagName('head')[0].appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    


<aside class="post-related">
  <h2>Related Posts</h2>
  <ul>
    
    <li>
      <span class="post-date">2014-09-15</span>
      <a class="post-link" href="/2014/09/diff-between-firefox-330-beta-3-default.html">Diff between firefox 33.0 beta 3 default preference and firefox 32.0</a>
    </li>
    
    <li>
      <span class="post-date">2014-09-06</span>
      <a class="post-link" href="/2014/09/move-to-jekyll.html">Jekyll移行メモ</a>
    </li>
    
    <li>
      <span class="post-date">2014-08-31</span>
      <a class="post-link" href="/2014/08/hello-gh-pages-goodbye-blogger.html">Hello github page, Goodbye blogger. this blog has moved to github.io!</a>
    </li>
    
    <li>
      <span class="post-date">2014-08-07</span>
      <a class="post-link" href="/2014/08/diff-between-firefox-320-beta-4-default.html">Diff between firefox 32.0 beta 4 default preference and firefox 31.0</a>
    </li>
    
    <li>
      <span class="post-date">2014-07-07</span>
      <a class="post-link" href="/2014/07/diff-between-firefox-310-beta-6-default.html">Diff between firefox 31.0 beta 6 default preference and firefox 30.0</a>
    </li>
    
  </ul>
</aside>


    </div>
  </div>
  <footer class="site-footer">
  <div class="wrap">
    <h2 class="footer-heading">cat_in_136.blog()</h2>
    <div class="footer-col-3 column">
      <p>
        Copyright (C) <a href="https://twitter.com/cat_in_136/">@cat_in_136</a><br />
        Content is available under a
        <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License">CC BY-NC-SA 4.0</a>
        unless otherwise noted.
      </p>
    </div>
    <div class="footer-col-3 column">
      <ul>
        <li>
          <a href="https://twitter.com/cat_in_136/">Twitter @cat_in_136</a>
        </li>
        <li>
          <a href="https://addons.mozilla.org/firefox/user/popoki-tom-cat_in_136/">Firefox Addons</a>,
          <a href="https://addons.mozilla.org/firefox/addon/4420">Configuration Mania</a>
        </li>
        <li>
          <a href="https://github.com/cat-in-136">Github</a>,
          <a href="https://gist.github.com/cat-in-136">Gist</a>
        </li>
        <li>
          <a href="https://bitbucket.org/cat_in_136/">Bitbucket</a>
        </li>
        <li>
          <a href="http://www.flickr.com/photos/27992339@N00/">Flickr</a>
        </li>
        <li>
          <a href="http://gnome-look.org/usermanager/search.php?username=catin136&amp;action=contents">GNOME-LOOK.org</a>
        </li>
      </ul>
    </div>
  </div>
</footer>

</body>
</html>
